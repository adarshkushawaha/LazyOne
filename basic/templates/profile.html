{% block content %}
<style>
    body {
        background: #f3f7ff;
        overflow-x: hidden;
    }
    
    /* Animated background cubes and shapes */
    .background-shapes {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        pointer-events: none;
        overflow: hidden;
    }
    
    .cube {
        position: absolute;
        width: 60px;
        height: 60px;
        transform-style: preserve-3d;
        animation: rotateCube 15s infinite linear;
        opacity: 0.15;
    }
    
    .cube-face {
        position: absolute;
        width: 60px;
        height: 60px;
        border: 1.5px solid #7da8e0;
        background: linear-gradient(135deg, #a8c8f3 0%, #d4e4ff 100%);
    }
    
    .cube-face:nth-child(1) { transform: rotateY(0deg) translateZ(30px); }
    .cube-face:nth-child(2) { transform: rotateY(90deg) translateZ(30px); }
    .cube-face:nth-child(3) { transform: rotateY(180deg) translateZ(30px); }
    .cube-face:nth-child(4) { transform: rotateY(-90deg) translateZ(30px); }
    .cube-face:nth-child(5) { transform: rotateX(90deg) translateZ(30px); }
    .cube-face:nth-child(6) { transform: rotateX(-90deg) translateZ(30px); }
    
    .cube:nth-child(1) { top: 10%; left: 15%; animation-duration: 12s; }
    .cube:nth-child(2) { top: 60%; left: 8%; animation-duration: 18s; animation-delay: -3s; }
    .cube:nth-child(3) { top: 25%; right: 12%; animation-duration: 14s; animation-delay: -6s; }
    .cube:nth-child(4) { top: 75%; right: 20%; animation-duration: 16s; animation-delay: -9s; }
    
    @keyframes rotateCube {
        0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg); }
        100% { transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg); }
    }
    
    /* Floating geometric shapes */
    .geo-shape {
        position: absolute;
        opacity: 0.12;
        animation: float 20s infinite ease-in-out;
    }
    
    .circle {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(135deg, #8fb4e8 0%, #c5dff8 100%);
        border: 2px solid #6a9dd6;
    }
    
    .triangle {
        width: 0;
        height: 0;
        border-left: 40px solid transparent;
        border-right: 40px solid transparent;
        border-bottom: 70px solid #9dc4f7;
        filter: drop-shadow(0 0 5px rgba(123, 164, 219, 0.4));
    }
    
    .square {
        width: 65px;
        height: 65px;
        background: linear-gradient(135deg, #a5c8f5 0%, #d8e9ff 100%);
        border: 2px solid #7da8e0;
        transform: rotate(45deg);
    }
    
    .geo-shape:nth-child(5) { top: 15%; left: 5%; animation-duration: 18s; }
    .geo-shape:nth-child(6) { top: 50%; left: 85%; animation-duration: 22s; animation-delay: -5s; }
    .geo-shape:nth-child(7) { top: 80%; left: 25%; animation-duration: 20s; animation-delay: -10s; }
    .geo-shape:nth-child(8) { top: 35%; right: 5%; animation-duration: 24s; animation-delay: -7s; }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        25% { transform: translateY(-20px) rotate(5deg); }
        50% { transform: translateY(-10px) rotate(-5deg); }
        75% { transform: translateY(-25px) rotate(3deg); }
    }
    
    .background-deco {
        position: fixed;
        top: -100px;
        right: -120px;
        width: 380px;
        height: 320px;
        z-index: 0;
        pointer-events: none;
        opacity: 0.24;
        filter: blur(5px);
    }
    
    .profile-card {
        position: relative;
        max-width: 470px;
        margin: 70px auto;
        padding: 48px 42px 24px 42px;
        background: #fff;
        border-radius: 22px;
        box-shadow: 0 8px 38px rgba(100,140,180,0.11);
        z-index: 1;
        overflow: hidden;
    }
    
    .profile-card h2 {
        text-align: center;
        font-size: 1.8rem;
        margin-bottom: 1.6em;
        color: #345182;
        font-weight: 700;
        letter-spacing: .5px;
    }
    
    .profile-card label {
        font-weight: 500;
        color: #5e81ad;
        margin-bottom: 9px;
        display: block;
        font-size: 1.1em;
    }
    
    .profile-card input[type="text"],
    .profile-card input[type="number"],
    .profile-card textarea {
        width: 100%;
        padding: 14px 17px;
        border: 1.4px solid #b2c7e6;
        border-radius: 7px;
        font-size: 1.09rem;
        margin-bottom: 30px;
        margin-top: 2px;
        background: #eaf3ff;
        transition: background .25s, border .2s;
        color: #273858;
    }
    
    .profile-card input[type="text"]:focus,
    .profile-card input[type="number"]:focus,
    .profile-card textarea:focus {
        border-color: #82b3fa;
        background: #d9edff;
        outline: none;
    }
    
    .profile-card textarea {
        resize: vertical; 
        min-height: 80px; 
        max-height: 200px;
    }
    
    .profile-card button[type="submit"] {
        width: 100%;
        padding: 15px 0;
        background: linear-gradient(92deg,#77cfee 0%,#9ddeae 100%);
        color: #175166;
        font-size: 1.18em;
        border: none;
        border-radius: 11px;
        margin-top: 20px;
        cursor: pointer;
        font-weight: 600;
        box-shadow: 0 8px 16px 0 rgba(173,224,201,0.11);
        transition: background .22s, transform .16s;
    }
    
    .profile-card button[type="submit"]:hover {
        background: linear-gradient(84deg,#5db2df 0%,#7ad292 100%);
        transform: translateY(-2px) scale(1.04);
    }
    
    .profile-card .verified {
        color: #31b376;
        font-weight: 700;
        margin-left: 10px;
        vertical-align: middle;
        font-size: 1em;
    }
    
    .profile-card #verify-phone-button {
        background: #ddefff;
        color: #3b75b3;
        padding: 9px 24px;
        border-radius: 18px;
        font-size: 1.09em;
        font-weight: 500;
        border: 1.2px solid #bde9eb;
        margin: 8px 0 22px 0;
        cursor:pointer;
        transition: background .18s;
    }
    
    .profile-card #verify-phone-button:hover {
        background: #c8e5f4;
    }
    
    .profile-card #phone-verification-code-group {
        margin-bottom: 22px;
        background: #effcff;
        padding: 16px 12px;
        border-radius: 9px;
    }
    
    @media (max-width: 700px) {
        .profile-card {
            padding: 16px 5vw 18px 5vw;
        }
        .background-deco { display: none; }
        .cube { width: 40px; height: 40px; }
        .cube-face { width: 40px; height: 40px; }
        .geo-shape { transform: scale(0.7); }
    }
</style>

<!-- Animated background shapes -->
<div class="background-shapes">
    <!-- 3D Cubes -->
    <div class="cube">
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
    </div>
    <div class="cube">
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
    </div>
    <div class="cube">
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
    </div>
    <div class="cube">
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
        <div class="cube-face"></div>
    </div>
    
    <!-- Geometric Shapes -->
    <div class="geo-shape circle"></div>
    <div class="geo-shape triangle"></div>
    <div class="geo-shape square"></div>
    <div class="geo-shape circle"></div>
</div>

<div class="background-deco">
    <svg viewBox="0 0 400 300">
      <ellipse cx="220" cy="120" rx="160" ry="98" fill="#b7d1ff"/>
      <ellipse cx="355" cy="52" rx="68" ry="54" fill="#dde9fa"/>
      <ellipse cx="65" cy="220" rx="54" ry="45" fill="#c3ffe6"/>
    </svg>
</div>

<div class="profile-card">
    <h2>Edit Your Profile</h2>
    <form method="post">
        {% csrf_token %}
        <label for="first_name">First Name:</label>
        <input type="text" id="first_name" name="first_name" value="{{ profile.first_name }}">

        <label for="last_name">Last Name:</label>
        <input type="text" id="last_name" name="last_name" value="{{ profile.last_name }}">

        <label for="bio">Bio:</label>
        <textarea id="bio" name="bio">{{ profile.bio }}</textarea>

        <label for="college">College:</label>
        <input type="text" id="college" name="college" value="{{ profile.college }}">

        <label for="major">Major:</label>
        <input type="text" id="major" name="major" value="{{ profile.major }}">

        <label for="roll_no">Roll Number:</label>
        <input type="text" id="roll_no" name="roll_no" value="{{ profile.roll_no }}">

        <label for="batch">Batch:</label>
        <input type="number" id="batch" name="batch" value="{{ profile.batch }}">

        <label for="phone_number">Phone Number (with country code):</label>
        <input type="text" id="phone_number" name="phone_number" value="{{ profile.phone_number }}" placeholder="+919876543210">
        {% if profile.is_phone_verified %}
            <span class="verified">âœ“ Verified</span>
        {% else %}
            <button type="button" id="verify-phone-button">Verify</button>
        {% endif %}

        <div id="recaptcha-container"></div>
        <div id="phone-verification-code-group" style="display: none;">
            <label for="phone-verification-code">Verification Code:</label>
            <input type="text" id="phone-verification-code" placeholder="123456">
            <button type="button" id="submit-verification-code">Submit Code</button>
        </div>

        <label for="instagram_username">Instagram Username:</label>
        <input type="text" id="instagram_username" name="instagram_username" value="{{ profile.instagram_username }}" placeholder="your_insta_handle">
        <button type="submit">Update Profile</button>
    </form>
</div>

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
<script>
    // Your original JS code remains unchanged...
</script>
{% endblock %}
